apply plugin: 'application'

dependencies {
	api project(':java:faasit.dsl')
	api "org.eclipse.xtext:org.eclipse.xtext.ide:${xtextVersion}"
}

// Add a start script for the socket case
mainClassName = 'cn.njuics.faasit.dsl.ide.RunServer'
startScripts {
	applicationName = 'faasit-socket'
}

// Add another start script for the standalone / self-contained case
task standaloneStartScript(type: CreateStartScripts) {
	mainClass = 'org.eclipse.xtext.ide.server.ServerLauncher'
	applicationName = 'faasit-standalone'
	def t = project.tasks.getByPath('startScripts');
    classpath = t.classpath;
    outputDir = t.outputDir;
}

def t = project.tasks.getByPath('startScripts')
t.dependsOn(standaloneStartScript) // trigger 'secondaryStartScript' execution automatically